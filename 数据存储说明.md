# 数据存储说明

## JSON数据存储位置

这个项目中的数据存储在以下位置：

### 1. localStorage（主要存储）

**位置**：浏览器的localStorage中
**存储键名**：`hierarchical_item_manager_data`
**如何查看**：
1. 打开浏览器开发者工具（F12）
2. 选择"Application"或"存储"标签
3. 在左侧选择"Local Storage"
4. 选择当前网站域名
5. 查找 `hierarchical_item_manager_data` 键

**特点**：
- 自动保存，无需手动操作
- 数据存储在浏览器本地
- 清除浏览器数据会丢失数据
- 支持自动备份和恢复

### 2. JSON文件（可选存储）

**位置**：用户手动下载保存到本地
**文件名**：`data.json`
**如何生成**：
1. 点击"数据管理"按钮
2. 选择"导出数据"
3. 文件会自动下载到本地

**特点**：
- 需要手动触发保存
- 数据存储在用户本地文件系统
- 可以跨浏览器同步
- 支持版本控制和备份

## 数据结构

```json
{
  "groups": [
    {
      "id": "组ID",
      "name": "组名称",
      "items": [
        {
          "id": "条目ID",
          "content": "条目内容",
          "checked": false,
          "createdAt": "创建时间",
          "updatedAt": "更新时间"
        }
      ],
      "createdAt": "创建时间",
      "updatedAt": "更新时间"
    }
  ],
  "version": "1.0.0",
  "lastUpdated": "最后更新时间"
}
```

## 数据管理

### 自动保存
- 数据会在操作后自动保存到localStorage
- 每2秒自动保存一次
- 支持文件存储时会同时保存到文件

### 手动保存
- 点击"保存到文件"按钮手动保存
- 数据会下载为JSON文件

### 数据导入
- 点击"从文件加载"选择JSON文件
- 支持导入之前导出的数据文件

### 数据备份
- 支持自动备份到localStorage
- 可以手动创建备份文件
- 支持从备份文件恢复数据

## 注意事项

1. **localStorage数据**：
   - 数据存储在浏览器中，清除浏览器数据会丢失
   - 不同浏览器/设备之间数据不互通
   - 建议定期导出数据备份

2. **JSON文件数据**：
   - 文件保存在用户本地
   - 可以跨浏览器/设备同步
   - 建议妥善保管备份文件

3. **数据安全**：
   - 敏感数据建议加密存储
   - 定期备份重要数据
   - 避免在公共设备上保存敏感数据

## 如何查看当前数据

### 方法1：通过浏览器开发者工具
1. 打开应用页面
2. 按F12打开开发者工具
3. 选择"Application"标签
4. 在左侧找到"Local Storage" > 当前域名
5. 查看 `hierarchical_item_manager_data` 的值

### 方法2：导出数据
1. 在应用中点击"数据管理"按钮
2. 选择"导出数据"
3. 下载的JSON文件包含所有数据

### 方法3：控制台查看
在浏览器控制台中输入：
```javascript
localStorage.getItem('hierarchical_item_manager_data')
```

## 数据恢复

### 从localStorage恢复
- 刷新页面会自动从localStorage加载数据
- 如果localStorage损坏，会使用默认数据

### 从JSON文件恢复
1. 点击"数据管理"按钮
2. 选择"从文件加载"
3. 选择之前导出的JSON文件
4. 数据会自动导入并覆盖现有数据

## 常见问题

**Q: 为什么看不到JSON数据文件？**
A: JSON数据文件需要手动导出，不会自动生成。点击"数据管理" > "导出数据"来生成文件。

**Q: 数据丢失了怎么办？**
A: 如果之前导出了JSON文件，可以通过"从文件加载"恢复。如果没有，数据可能无法恢复。

**Q: 如何备份数据？**
A: 定期点击"数据管理" > "导出数据"将数据保存到本地文件。

**Q: localStorage和文件存储有什么区别？**
A: localStorage是浏览器自动保存的，文件存储需要手动操作。localStorage数据在清除浏览器时会丢失，文件存储可以长期保存。