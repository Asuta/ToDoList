<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>拖拽功能测试</title>
  <link rel="stylesheet" href="css/styles.css">
  <style>
    body {
      padding: 20px;
      background-color: #f5f5f5;
    }
    .test-info {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .test-info h2 {
      color: #2563eb;
      margin-bottom: 10px;
    }
    .test-info ul {
      margin: 10px 0;
      padding-left: 20px;
    }
    .test-info li {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div class="test-info">
    <h2>拖拽功能测试页面</h2>
    <p>此页面用于测试优化后的拖拽功能，检查是否解决了闪烁问题。</p>
    <h3>测试步骤：</h3>
    <ul>
      <li>1. 尝试拖拽组标题来重新排序组</li>
      <li>2. 尝试拖拽条目来重新排序条目</li>
      <li>3. 尝试将条目从一个组拖拽到另一个组</li>
      <li>4. 观察拖拽过程是否平滑，无闪烁</li>
    </ul>
    <h3>预期效果：</h3>
    <ul>
      <li>✅ 拖拽过程平滑，无闪烁</li>
      <li>✅ 显示占位符指示放置位置</li>
      <li>✅ 拖拽元素半透明显示</li>
      <li>✅ 拖拽完成后正确更新位置</li>
    </ul>
  </div>

  <header class="app-header">
    <h1>拖拽测试 - 层级化条目管理系统</h1>
    <div class="header-actions">
      <button id="add-group-btn" class="btn btn-primary">添加组</button>
      <button id="copy-selected-btn" class="btn btn-secondary" style="display: none;">复制已选择</button>
      <button id="clear-selection-btn" class="btn btn-secondary" style="display: none;">取消选择</button>
    </div>
  </header>

  <main class="app-main">
    <section id="groups-container" class="groups-container">
      <!-- 组卡片将动态插入这里 -->
    </section>
  </main>

  <script src="js/utils.js"></script>
  <script src="js/fileStorageManager.js"></script>
  <script src="js/dataManager.js"></script>
  <script src="js/uiManager.js"></script>
  <script>
    // 初始化测试数据
    const testData = {
      groups: [
        {
          id: 'test-group-1',
          name: '测试组 1',
          items: [
            { id: 'item-1-1', content: '测试条目 1-1', checked: false },
            { id: 'item-1-2', content: '测试条目 1-2', checked: false },
            { id: 'item-1-3', content: '测试条目 1-3', checked: true }
          ],
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        },
        {
          id: 'test-group-2',
          name: '测试组 2',
          items: [
            { id: 'item-2-1', content: '测试条目 2-1', checked: false },
            { id: 'item-2-2', content: '测试条目 2-2', checked: true }
          ],
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        },
        {
          id: 'test-group-3',
          name: '测试组 3',
          items: [
            { id: 'item-3-1', content: '测试条目 3-1', checked: false },
            { id: 'item-3-2', content: '测试条目 3-2', checked: false },
            { id: 'item-3-3', content: '测试条目 3-3', checked: false },
            { id: 'item-3-4', content: '测试条目 3-4', checked: true }
          ],
          createdAt: new Date().toISOString(),
          updatedAt: new Date().toISOString()
        }
      ]
    };

    // 初始化应用
    const dataManager = new DataManager();
    const uiManager = new UIManager(dataManager);

    // 加载测试数据
    dataManager.data = testData;
    dataManager.saveData();
    uiManager.renderAllGroups();

    console.log('拖拽测试页面已加载，测试数据已初始化');
  </script>
</body>
</html>
